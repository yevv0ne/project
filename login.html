<!doctype html><html lang="ko"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>로그인</title>
<style>
body{font-family:system-ui,Segoe UI,Arial,sans-serif;display:grid;place-items:center;height:100vh;margin:0;background:#f7f5ff}
.card{background:#fff;padding:24px 20px;border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.08);width:min(360px,92vw)}
h1{font-size:20px;margin:0 0 16px}
input,button{width:100%;padding:12px 14px;border-radius:12px;border:1px solid #e5defa;font-size:14px}
input{margin:6px 0 12px;background:#fbfaff}
button{cursor:pointer;background:#7e57c2;color:#fff;border:none}
small{color:#b00020;display:block;height:18px;margin-top:6px}
a{font-size:12px;display:inline-block;margin-top:10px;color:#5a43a3}
</style>
</head><body>
  <div class="card">
    <h1>로그인</h1>
    <form id="f">
      <input id="email" type="email" placeholder="이메일" required />
      <input id="password" type="password" placeholder="비밀번호" required />
      <button type="submit">로그인</button>
      <small id="e"></small>
    </form>
    <a href="/register">회원가입</a>
  </div>
<script>
  const params = new URLSearchParams(location.search);
  const next = params.get("next") || "/app";
  document.getElementById("f").addEventListener("submit", async (ev)=>{
    ev.preventDefault();
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;
    const res = await fetch("/auth/login", {
      method:"POST", headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ email, password })
    });
    const data = await res.json().catch(()=>({}));
    if (res.ok && data.ok) location.href = next;
    else document.getElementById("e").textContent = "아이디 또는 비밀번호가 올바르지 않습니다.";
  });
</script>
</body></html>
